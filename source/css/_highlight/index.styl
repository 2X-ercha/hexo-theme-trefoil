figure.highlight > :is(table, pre)
  max-height: var(--code-height)
  transition: all .5s ease-in-out
  overflow: hidden
  display: block

figure.highlight > :is(table, pre):not(.code-expand-btn.expand-done + *)
  max-height: var(--code-height-limit)

.highlight
  position: relative
  overflow: auto
  transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1)
  box-shadow: 0 5px 32px #ddd
  &:hover
    box-shadow: 0 3px 32px #aaa

  figcaption
    padding: 8px 0
    font-size: 13px
    // opacity: .75
    font-weight: 700
    border-bottom: 1px solid #b9b4b3

    i
      vertical-align: bottom
      margin: 4px
      opacity: .25
      transition: 0.4s

      &:hover
        opacity: .75
        transition: 0.4s

  .code-expand-btn
    text-align: center
    position: absolute
    width: 100%
    height: 30px
    bottom: 0
    left: 0
    background: linear-gradient(180deg, #aaaaaa00, #dddddd)
    pointer-events: none
    i
      pointer-events: all
      max-width: 50%
      margin: auto
      display: block
      animation: code-expand-key 1.2s infinite
    i.ri-arrow-down-s-fill
      animation-delay: 0.6s

  .code-expand-btn.expand-done
    background: none

  .code
    vertical-align: top
    &:before
      position: absolute
      font-size: 13px
      top: 4px
      right: 12px
      padding: 4px 0.5rem
      opacity: .25
      font-weight: 700

  td.gutter pre
      border-right: 1px solid #b9b4b3
      padding-right: 0.5rem

  // 代码块外观
  pre
    margin: 6px 0
    font-family: 'SourceCodePro'
    font-size: .8125rem
  td.code
    padding-left: 1rem

  .comment
  .quote
    color: #a0a1a7
    font-style: italic

  .doctag
  .formula
  .keyword
    color: #a626a4

  .deletion
  .name
  .section
  .selector-tag
  .subst
    color: #e45649

  .literal
    color: #0184bb

  .addition
  .attribute
  .meta .string
  .regexp
  .string
    color: #50a14f

  .attr
  .number
  .selector-attr
  .selector-class
  .selector-pseudo
  .template-variable
  .type
  .variable
    color: #986801

  .bullet
  .link
  .meta
  .selector-id
  .symbol
  .title
    color: #4078f2

  .built_in
  .class .title
  .title.class_
    color: #c18401

  .emphasis
    font-style: italic

  .strong
    font-weight: 700

  .link
    text-decoration: underline

@keyframes code-expand-key
  0%
    transform: translateY(0)
  50%
    transform: translateY(6px)
  100%
    transform: translateY(0)